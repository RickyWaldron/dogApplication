html
	head
		include navBar.pug
		title Sign up #{title}
		script(src="https://code.jquery.com/jquery-3.2.1.min.js"
				integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
				crossorigin="anonymous")

	body
		div(class="containerSignup")
			form(id="firstSignup", class="signupClass" ACTION="/signup")
				input(class="textField", id="email", type="email", name="email", value="email", placeholder="email")
				p(id="checkEmailText")
				input(class="textField", id="password", type="password", name="password", password="password", placeholder="password")
				input(class="textField", id="passwordCheck", type="password", name="passwordCheck", password="password", placeholder="password check")
				input(class="submitButton", type="submit", name="submit", value="Next step")
				h2(id="text")
				h2(id="success")


	script.
		$(document).ready(function(){
			$("#firstSignup").submit(function(event) {
				event.preventDefault()
				$("#text").text('');
				let email = $('#email').val()
				let password = $('#password').val()
				let passwordCheck = $('#passwordCheck').val()
				console.log(password)
				if(password.length < 6) {
					event.preventDefault()
					$("#text").text("password is not long enough")
					$("#password").val('');
					$("#passwordCheck").val('')
				}
				else if(password !== passwordCheck){
					event.preventDefault()
					$("#text").text("passwords do not match");
					$("#password").val('');
					$("#passwordCheck").val('')
				}
				else { 
						$.post("/signup", {email: email, password: password, ajax: true}, (result) => {
						if(result.ajax == false) {
						console.log(result.existingUser)
						console.log(result.ajax)
						event.preventDefault()
						$("#text").text(`${result.existingUser} is already taken`)
						}
						else {
							window.location.assign("/signupInformation")
							}
						})
					}			
				})
			})